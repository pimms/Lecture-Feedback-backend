<html>
	<head>
	</head>

	<body style="margin-left:10%;">
		<h1>Lecture Feedback web-API description</h1>
		<p>
			This page contains an updated overview of the Lecture Feedback <br/>
			web API - implemented and in-development features.<br/>
			All paths should be relative to the HTTP-root of the site.<br/>
			Major functions should be implemented in their own PHP scripts.<br/>
		</p>
		<br/><br/>

		<!-- Template parameter
			<li> <i></i></li>
			<i><u>Type:</u></i>
			<br><br>
			<i><u>Example:</u></i>
			<br><br>
		-->


		<!-- GET FEED -->
		<h2>Retrieve feed of reviews</h2>
		<p>
			Service base URL: &nbsp;&nbsp;&nbsp;<b>getFeed.php</b>

			<h3>Parameters</h3>
			<li>filter <i>REQUIRED</i></li>
			<i><u>Type:</u></i> Comma separated list of the items to include in the response.<br/>
			The items must be HiG course codes.<br/> <br/>
			<i><u>Example:</u></i>
			<i>"IMT3672,IMT2021"</i> will return a response with the<br/>the courses Mobile Development Project and Algorithmic Methods.<br/><br/>

			<li>first <i>optional</i></li>
			<i><u>Type:</u></i> Integer<br/>
			The index of the first item to be returned. Defaults to 0.<br/><br/>

			<li>num <i>optional</i></li>
			<i><u>Type:</u></i> Integer<br/>
			The number of items to be returned in the result-set. Defaults to 20.

			<li>hash <i>optional</i></li>
			<i><u>Type:</u></i> The hash of the lecture as defined in LectureItem.java and<br>
			in the description of "postReview". Only feeds with this hash will be returned.

			<br/><br/>
			<h3>Return</h3>
			{  <br/>
			&emsp;"status": "ok"/"bad",<br/>
			&emsp;"first" : &lt;FIRST&gt;<br>
			&emsp;"count" : &lt;COUNT&gt;<br>
			&emsp;"item_count":N,<br/>
			&emsp;"items": [<br/>
			&emsp;&emsp;{<br/>
			&emsp;&emsp;&emsp;"id"       	: 150913,<br/>
			&emsp;&emsp;&emsp;"course_name" : "Algoritmiske Metoder",<br/>
			&emsp;&emsp;&emsp;"course_code" : "IMT2021",<br/>
			&emsp;&emsp;&emsp;"lecturer" 	: "Frode Haug",<br/>
			&emsp;&emsp;&emsp;"time"     	: "10:00 - 12:00",<br/>
			&emsp;&emsp;&emsp;"date" 	 	: "20131105",<br/>
			&emsp;&emsp;&emsp;"room"     	: "K105",<br/>
			&emsp;&emsp;&emsp;"ratings"  	: [0, 1, 0, 1, 1],<br/>
			&emsp;&emsp;&emsp;"comment"  	: "Frode sl&aring;r p&aring; stortrommen atter en gang!",<br/>
			&emsp;&emsp;&emsp;"review_time" : "2013-12-31 23:59"<br/>
			&emsp;&emsp;},<br/>
			&emsp;&emsp;...<br/>
			&emsp;]<br/>
			}<br/>
		</p>

		
		<!-- POST REVIEW -->
		<h2>Post a review</h2>
		<p>
			Service base URL:&nbsp;&nbsp;&nbsp;<b>postReview.php</b>

			<h3>Parameters</h3>
			
			<li>client_hash <i>REQUIRED</i></li>
			<i><u>Type:</u></i> SHA-1 hash of the ANDROID_ID and our
			super secret salt, "SpiceGurls". <br/><br/>
			<i><u>Example:</u></i>
			student_hash = SHA1(ANDROID_ID + "SpiceGurls");<br><br>

			<li>course_name <i>REQUIRED</i></li>
			<i><u>Type:</u></i> String holding the name of the course.<br><br>
			<i><u>Example:</u></i>
			course_name = "Algoritmiske Metoder"
			<br><br>

			<li>course_code <i>REQUIRED</i></li>
			<i><u>Type:</u></i> String holding HiG's code for this course.<br><br>
			<i><u>Example:</u></i>
			course_code = "IMT3672"
			<br><br>

			<li>lecturer <i>REQUIRED</i></li>
			<i><u>Type:</u></i>
			String containing the name of the lecturer exactly
			as it appears on TimeEdit.
			<br><br>
			<i><u>Example:</u></i>
			lecturer = "Haug";
			<br><br>

			<li>room <i>REQUIRED</i></li>
			<i><u>Type:</u></i> 
			String containing the name of the room.<br><br>
			<i><u>Example:</u></i> 
			room = "K105";<br><br>

			<li>start_time <i>REQUIRED</i></li>
			<i><u>Type:</u></i> UNIX timestamp of the starting time
			of the lecture.<br><br>
			<i><u>Example:</u></i>
			String time = new Date("2013-12-31 10:00").unixTimestamp();
			<br><br>

			<li>end_time <i>REQUIRED</i></li>
			<i><u>Type:</u></i> UNIX timestamp of the ending time
			of the lecture.<br><br>
			<i><u>Example:</u></i>
			String time = new Date("2013-12-31 12:00").unixTimestamp();
			<br><br>

			<li>attribute_version_set <i>REQUIRED</i></li>
			<i><u>Type:</u></i> Int holding a value defining
			which version of the attribute set is used.
			<br><br>
			<i><u>Example:</u></i> Must be 1.
			<br><br>

			<li>attributes <i>REQUIRED</i></li>
			<i><u>Type:</u></i> 
			Dot-separated boolean values.
			<br><br>
			<i><u>Example:</u></i>
			attributes = "0.1.1.1.0";<br><br>

			<li>hash <i>REQUIRED</i></li>
			<i><u>Type:</u></i> String containing the SHA1 of
			selected unique lecture properties.
			<br><br>
			<i><u>Example:</u></i><br>
			<i>
				hash = SHA1(<br>   
				&emsp;startTime, // The UNIX timestamp string of the start time of the lecture<br>
				&emsp;endTime, // The UNIX timestamp string of the end time of the lecture<br>
				&emsp;courseName, // The course name as it appears on TimeEdit<br>
				&emsp;courseCode, // The HiG code of the course<br>
				&emsp;room, // The room as it appears on TimeEdit<br>
				&emsp;lecturer // The lecturer as it appears on TimeEdit<br>
				)<br>
			</i>
			<br><br>

			<li>comment <i>OPTIONAL</i><li>
			<i><u>Type:</u></i> String up to 333 characters in length.
			<br><br>
			<i><u>Example:</u></i>
			comment = "Great lecture prof";
			<br><br>

			<h3>Return</h3>
			{<br>
			&emsp;"status": "ok"/bad<br>
			}<br>
		</p>

		<h2>Statistics</h2>
		<p>
			Service base URL: getStats.php<br><br>
			All statistics-calls are defined by a required parameter,<i> action</i>.
			<br><br>
			<h3>Total votes for course</h3>
			<b>action: </b>course_votes<br><br>
			Other parameters:

			<li>course <i>REQUIRED</i></li>
			<i><u>Type:</u></i> String, HiG code of  the course.<br>
			<i><u>Example:</u></i> "IMT3672"<br>
			<i><u>Return:</u></i><br>
			{<br>
			&emsp;"status": "ok"/"bad",<br>
			&emsp;"positive": N,<br>
			&emsp;"negative": M<br>
			}<br><br>

			<h3>Total votes for lecture</h3>
			<b>action: </b>lecture_votes<br>
			Additional parameters:<br>
			<li>hash <i>REQUIRED</i></li>
			<i><u>Type:</u></i> The lecture string as defined everywhere else.
			<br><br>
			<i><u>Example:</u></i> aeruheriaerblaieraeiurlhaerlkhjaer hash shit
			<br>
			<i><u>Return:</u></i><br>
			{<br>
			&emsp;"status": "ok"/"bad",<br>
			&emsp;"positive": N,<br>
			&emsp;"negative": M<br>
			}<br><br>

			<h3>Total votes for all lectures in a course</h3>
			<b>action: </b>lecture_votes_all<br>
			Additional parameters:<br>
			<li>course <i>REQUIRED</i></li>
			<i><u>Type:</u></i> HiG code of the course.
			<br><br>
			<li>first <i>OPTIONAL</i></li>
			<i><u>Type:</u> integer, first returned item in the return set.</i>
			<br><br>
			<li>count <i></i></li>
			<i><u>Type:</u></i> integer, the maximum number of items to be <br>
			returned in the result set.
			<br><br>
			<i><u>Return:</u></i><br>
			{<br>
			&emsp;"status": "ok"/"bad",<br>
			&emsp;"first" : &lt;FIRST&gt;<br>
			&emsp;"count" : &lt;COUNT&gt;<br>
			&emsp;"item_count":N,<br>
			&emsp;"items": [<br>
			&emsp;&emsp;{  <br>
			&emsp;&emsp;&emsp;"id"       	: 150913,<br/>
			&emsp;&emsp;&emsp;"course_name" : "Algoritmiske Metoder",<br/>
			&emsp;&emsp;&emsp;"course_code" : "IMT2021",<br/>
			&emsp;&emsp;&emsp;"lecturer" 	: "Frode Haug",<br/>
			&emsp;&emsp;&emsp;"time"     	: "10:00 - 12:00",<br/>
			&emsp;&emsp;&emsp;"date" 	 	: "20131105",<br/>
			&emsp;&emsp;&emsp;"room"     	: "K105",<br/>
			&emsp;&emsp;&emsp;"positive" 	: N,<br>
			&emsp;&emsp;&emsp;"negative"	: M<br>
			&emsp;&emsp;}, {...} <br>
			&emsp;]<br> 
			}<br><br>
		</p>
		
	</body>
</html>